jQuery(document).ready(function(a){var e=a("#menu-to-edit"),t=new MutationObserver(function(e){e.forEach(function(e){var t=e.addedNodes;null!==t&&a(t).each(function(){new menuLevel(a(this)).makeCollapseable().changeMenuItem()}),a(".menu-item").each(function(){new menuLevel(a(this)).notFollowedBy()})})}),i={childList:!0},n=a(".wp-full-overlay-sidebar-content"),s=function(){a(".menu-item").each(function(){var e=a(this),t=new menuLevel(e).makeCollapseable().changeMenuItem();e.find(".collapser").addClass("is-collapsed").parent().nextUntil(".menu-item-depth-0, .customize-control-nav_menu").hide(),t.notFollowedBy()})};n.length&&a(document).on("click",n,function(){var e=a("#menu-to-edit");e.length?(s(),t.observe(e[0],i)):e=void 0}),e.length&&(s(),t.observe(e[0],i)),a(document).on("click",".collapser",function(e){var t=a(this),i=t.parent(),n=new menuLevel(i);if(!t.hasClass("is-disabled")){if(t.hasClass("is-collapsed")){if(i.nextUntil(".menu-item-depth-"+n.depth(),".menu-item-depth-"+(n.depth()+1)).show(),e.altKey){var s=i.nextUntil(".menu-item-depth-"+n.depth());s.show(),a.each(s,function(){var e=a(this).find(".collapser");e.hasClass("is-disabled")||e.removeClass("is-collapsed")})}}else{var l=i.nextUntil(".menu-item-depth-"+n.depth());a.each(l,function(e,t){var i="menu-item-depth-[0-"+n.depth()+"]";a(t).attr("class").match(i)||a(t).find(".collapser").addClass("is-collapsed").parent().hide()})}t.toggleClass("is-collapsed")}return!1})});var menuLevel=function(e){this.$item=e;var s=jQuery;this.changeMenuItem=function(){0===this.$item.children(".menu-item-bar").find(".item-delete").length&&(this.$item.find(".menu-item-handle"),this.$item.find(s(".item-delete")).clone().css({display:"inline",float:"none","margin-left":"10px"}).appendTo(this.$item.find(".item-title")));return this},this.makeCollapseable=function(){return this.$item.find(".collapser").length||this.$item.prepend(s("<span>").addClass("collapser")),this},this.notFollowedBy=function(){return 0===this.$item.next(".menu-item-depth-"+(this.depth()+1)).length?this.$item.find(".collapser").addClass("is-disabled is-collapsed"):(this.$item.find(".collapser").removeClass("is-disabled"),this.$item.next(".menu-item-depth-"+(this.depth()+1)).is(":visible")&&this.$item.find(".collapser").removeClass("is-collapsed")),this},this.depth=function(){var e=this.$item.attr("class").split(" "),i=0,n=null;return s.each(e,function(e,t){if(n=s.trim(t).match(/^menu-item-depth-(\d)$/))return i=n[1],!1}),parseInt(i,10)}};